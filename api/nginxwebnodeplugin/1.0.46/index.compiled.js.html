<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: index.compiled.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: index.compiled.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>'use strict';
var nginxwebnodeplugin =
/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module &amp;&amp; module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(1);


/***/ }),
/* 1 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
// #!/usr/bin/env node
// -*- coding: utf-8 -*-
/** @module nginxWebNodePlugin *//* !
    region header
    [Project page](http://torben.website/nginxWebNodePlugin)

    Copyright Torben Sickert (info["~at~"]torben.website) 16.12.2012

    License
    -------

    This library written by Torben Sickert stand under a creative commons
    naming 3.0 unported license.
    See http://creativecommons.org/licenses/by/3.0/deed.de
    endregion
*/// region imports
exports.__esModule=true;exports.Nginx=undefined;var _promise=__webpack_require__(2);var _promise2=_interopRequireDefault(_promise);var _asyncToGenerator2=__webpack_require__(3);var _asyncToGenerator3=_interopRequireDefault(_asyncToGenerator2);var _child_process=__webpack_require__(4);var _clientnode=__webpack_require__(5);var _clientnode2=_interopRequireDefault(_clientnode);function _interopRequireDefault(obj){return obj&amp;&amp;obj.__esModule?obj:{default:obj}}// NOTE: Only needed for debugging this file.
try{__webpack_require__(6)}catch(error){}// endregion
// region plugins/classes
/**
 * Launches an application server und triggers all some pluginable hooks on
 * an event.
 */class Nginx{// region api
/**
     * Start nginx's child process and return a Promise which observes this
     * service.
     * @param servicePromises - An object with stored service promise
     * instances.
     * @param services - An object with stored service instances.
     * @param configuration - Mutable by plugins extended configuration object.
     * @returns A promise which correspond to the plugin specific continues
     * service.
     */static loadService(servicePromises,services,configuration){return(0,_asyncToGenerator3.default)(function*(){if(!services.hasOwnProperty('nginx')){services.nginx=(0,_child_process.spawn)('nginx',[],{cwd:process.cwd(),env:process.env,shell:true,stdio:'inherit'});// IgnoreTypeCheck
services.nginx.reload=function(){return new _promise2.default(function(resolve,reject){return(0,_child_process.exec)('nginx -s reload',{shell:true},function(// IgnoreTypeCheck
error,standardOutput,standardErrorOutput){if(error){// IgnoreTypeCheck
error.standardErrorOutput=standardErrorOutput;reject(error)}else resolve(standardOutput)})})};let promise=new _promise2.default(function(resolve,reject){for(const closeEventName of _clientnode2.default.closeEventNames)services.nginx.on(closeEventName,_clientnode2.default.getProcessCloseHandler(resolve,configuration.server.proxy.optional?resolve:reject,{reason:services.nginx,process:services.nginx}))});try{yield Nginx.checkReachability(configuration.server)}catch(error){if(configuration.server.proxy.optional){console.warn(`Nginx couldn't be started but was marked as optional.`);services.nginx=null;promise=null}else throw error}return{name:'nginx',promise}}return services.nginx})()}/**
     * Application will be closed soon.
     * @param services - An object with stored service instances.
     * @param configuration - Mutable by plugins extended configuration object.
     * @returns Given object of services.
     */static shouldExit(services,configuration){return(0,_asyncToGenerator3.default)(function*(){if(services.nginx!==null){services.nginx.kill('SIGINT');yield Nginx.checkReachability(configuration.server,true)}delete services.nginx;return services})()}// endregion
// region helper
/**
     * Check if a nginx server is currently (not) running.
     * @param serverConfiguration - Mutable by plugins extended configuration
     * object.
     * @param inverse - Boolean indicating if we should check for reachability
     * or unreachability.
     * @param timeoutInSeconds - Delay after assuming given resource isn't
     * available if no response is coming.
     * @param pollIntervallInSeconds - Seconds between two tries to reach given
     * url.
     * @param statusCodes - Status codes to accept an interpret as running
     * server.
     * @param options - Fetch options to use.
     * @returns A promise which will be resolved if a request to given url has
     * (not) finished. Otherwise returned promise will be rejected.
     */static checkReachability(serverConfiguration,inverse=false,timeoutInSeconds=3,pollIntervallInSeconds=0.1,statusCodes=[100,101,102,200,201,202,203,204,205,206,207,208,226,300,301,302,303,304,305,306,307,308],options={redirect:'manual'}){return(0,_asyncToGenerator3.default)(function*(){if(serverConfiguration.proxy.ports.length>0){const url='http'+(serverConfiguration.proxy.ports[0]===443?'s':'')+`://`+`${serverConfiguration.application.hostName}:`+`${serverConfiguration.proxy.ports[0]}`;return yield inverse?_clientnode2.default.checkUnreachability(url,true,timeoutInSeconds,pollIntervallInSeconds,statusCodes,options):_clientnode2.default.checkReachability(url,true,statusCodes,timeoutInSeconds,pollIntervallInSeconds,options)}return{}})()}// endregion
}exports.Nginx=Nginx;exports.default=Nginx;// endregion
// region vim modline
// vim: set tabstop=4 shiftwidth=4 expandtab:
// vim: foldmethod=marker foldmarker=region,endregion:
// endregion

/***/ }),
/* 2 */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE_2__;

/***/ }),
/* 3 */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE_3__;

/***/ }),
/* 4 */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE_4__;

/***/ }),
/* 5 */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE_5__;

/***/ }),
/* 6 */
/***/ (function(module, exports) {

if(typeof __WEBPACK_EXTERNAL_MODULE_6__ === 'undefined') {var e = new Error("Cannot find module \"source-map-support/register\""); e.code = 'MODULE_NOT_FOUND'; throw e;}
module.exports = __WEBPACK_EXTERNAL_MODULE_6__;

/***/ })
/******/ ]);</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-nginxWebNodePlugin.html">nginxWebNodePlugin</a></li></ul><h3>Classes</h3><ul><li><a href="module-nginxWebNodePlugin-Nginx.html">Nginx</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Wed Nov 22 2017 19:35:21 GMT+0100 (CET)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
